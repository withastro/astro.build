---
import { Sprite } from "astro-icon"
import clsx from "clsx"
import Card from "~/components/Card.astro"
import CardBody from "~/components/CardBody.astro"
import CardFooter from "~/components/CardFooter.astro"
import CardHeading from "~/components/CardHeading.astro"
import CardLabel from "~/components/CardLabel.astro"
import CardParagraph from "~/components/CardParagraph.astro"
import communityCloud from "../_assets/community-cloud.webp"
import DocsGraphic from "./DocsGraphic.astro"
import LandingSectionText from "./LandingSectionText.astro"
import SandboxGraphic from "./SandboxGraphic.astro"
import ThemesGraphic from "./ThemesGraphic.astro"

const toolingLogos = [
	{ icon: "logos/react-logomark", alt: "React Logo" },
	{ icon: "logos/vue-logomark", alt: "Vue Logo" },
	{ icon: "logos/preact-logomark", alt: "Preact Logo" },
	{ icon: "logos/svelte-logomark", alt: "Svelte Logo" },
	{ icon: "logos/lit-logomark", alt: "Lit Logo" },
	{ icon: "logos/tailwind-logomark", alt: "Tailwind Logo" },
	{ icon: "logos/solid-logomark", alt: "Solid Logo" },
	{ icon: "logos/alpinejs-logomark", alt: "Alpine Logo" },
]

// adds a fake box to limit the width of the first line,
// so it doesn't overlap the graphic
const graphicCardHeadingClass = clsx("before:float-right before:h-1 before:w-32")
---

<section class="landing-section">
	<LandingSectionText>
		<Fragment slot="title">
			Zero to website in <strong class="font-obviously-wide">whoa</strong>
		</Fragment>
	</LandingSectionText>

	<div
		class="mx-auto grid min-w-0 max-w-screen-xl grid-cols-1 gap-4 px-4 sm:grid-cols-2 lg:grid-cols-3"
	>
		<div class="grid sm:col-span-2 lg:col-span-3">
			<Card className="relative overflow-hidden">
				<CardBody class="z-10">
					<CardLabel>Easy to use</CardLabel>
					<div
						class="flex flex-col items-center justify-center gap-y-8 pb-6 sm:pb-8 md:flex-row lg:pb-10"
					>
						<div>
							<CardHeading lg class="max-w-[20ch]">
								Designed for your favorite UI library
							</CardHeading>
							<p class="body mt-6 text-gray-100 md:mr-16">
								Keep using your favorite UI framework and existing UI components in Astro. Migrate
								from <a
									href="https://docs.astro.build/en/guides/migrate-to-astro/from-create-react-app/"
									class="link-underline">Create React App</a
								> to Astro in minutes.
							</p>
						</div>
						<ul class="grid max-w-md grid-cols-9 gap-4 justify-self-end lg:max-w-lg">
							{
								toolingLogos.map(({ icon, alt }, i) => (
									<li
										class:list={[
											"col-span-2 flex aspect-square items-center justify-center rounded-full bg-white",
											i === 0 && "col-start-2",
										]}
									>
										<span class="sr-only">{alt}</span>
										<Sprite name={icon} aria-hidden="true" class="h-[60%] w-[60%]" />
									</li>
								))
							}
						</ul>
					</div>
				</CardBody>

				<div
					class="z-bur pointer-events-none absolute -bottom-1/3 -right-[20%] h-full w-full bg-blue-purple-gradient opacity-30 mask-radial-gradient md:-right-1/3"
				>
				</div>
			</Card>
		</div>

		<Card background="blue-purple">
			<SandboxGraphic class="absolute right-2 top-8" />
			<CardBody>
				<CardLabel>Sandbox</CardLabel>
				<div class={graphicCardHeadingClass}>
					<CardHeading>Try Astro in your browser</CardHeading>
				</div>
				<CardParagraph>
					Start your first Astro project right in the browser—no local development environment or
					signup required!
				</CardParagraph>
				<CardFooter>
					<a href="https://astro.new/" class="button button-white">Start a Project</a>
				</CardFooter>
			</CardBody>
		</Card>

		<Card background="blue-green">
			<ThemesGraphic class="absolute right-0 top-6" />
			<CardBody>
				<CardLabel>Get started</CardLabel>
				<div class={graphicCardHeadingClass}>
					<CardHeading>Explore Astro themes</CardHeading>
				</div>
				<CardParagraph>
					Discover 100+ themes & integrations to take your project to the next level: SEO,
					analytics, CMS integrations and more.
				</CardParagraph>
				<CardFooter>
					<a href="/themes/" data-astro-prefetch class="button button-white">Explore Themes</a>
				</CardFooter>
			</CardBody>
		</Card>

		<Card background="red-pink">
			<DocsGraphic class="absolute right-2 top-6" />
			<CardBody>
				<CardLabel>Documentation</CardLabel>
				<div class={graphicCardHeadingClass}>
					<CardHeading>Learn more in our docs</CardHeading>
				</div>
				<CardParagraph>
					Thanks to our wonderful contributors, our docs are the best place to learn, troubleshoot,
					and explore Astro.
				</CardParagraph>
				<CardFooter>
					<a href="https://docs.astro.build/" class="button button-white">Start Learning</a>
				</CardFooter>
			</CardBody>
		</Card>

		<div class="grid lg:col-span-3">
			<Card background="blue-purple">
				<div class="flex flex-1 flex-col lg:flex-row">
					<CardBody>
						<CardLabel>Community</CardLabel>
						<div class="flex flex-1 flex-col justify-center gap-6 lg:px-8 lg:pb-12">
							<CardHeading>
								<span class="lg:heading-2 lg:leading-[1.1]">Join our community</span>
							</CardHeading>
							<CardParagraph>
								Get support, get involved, and join our community of 10,000+ Astro developers—it all
								happens on Discord.
							</CardParagraph>
							<div class="mt-auto lg:mt-0">
								<a href="/chat" class="button button-white">Join our Discord</a>
							</div>
						</div>
					</CardBody>
					<div class="relative h-[420px] overflow-hidden sm:hidden lg:block lg:h-[480px] lg:flex-1">
						<img
							src={communityCloud.src}
							width={communityCloud.width}
							height={communityCloud.height}
							alt=""
							class="absolute left-16 top-8 h-[150%] w-[150%] max-w-none object-contain object-left-top"
							loading="lazy"
							decoding="async"
						/>
					</div>
				</div>
			</Card>
		</div>
	</div>
</section>
