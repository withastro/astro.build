---
title: 'Astro 5.13'
description: 'Astro 5.13 ships stuff!'
homepageLink:
  title: 'Astro 5.13'
  subtitle: 'Available now!'
publishDate: '2025-08-14'
authors:
  - sarah
  - ema
coverImage: '/src/content/blog/_images/astro-5130/blog-post-cover-astro-5130.webp'
socialImage: '/src/content/blog/_images/astro-5130/og-astro-5130.webp'
lang: 'en'
related:
  - astro-5120
  - astro-5110
---

import Mention from '/src/components/Mention.astro';

**üçÄ Lucky Astro 5.13 brings stuff, stuff, and more!**

The starting lineup includes:

- [**Experimental static `import.meta.env`**](#expermental-static-importmetaenv)
- [**Experimental Chrome DevTools workspace support**](#experimental-chrome-devtools-workspace-support)
- [**Multiple sitemaps**](#multiple-sitemaps)
- [**Experimental hosted error pages with the Node.js adapter**](#experimental-hosted-error-pages)
- [**Enum support in Astro DB tables**](#enum-support-in-astro-db-tables)
- [**Local support for Cloudflare KV**](#local-support-for-cloudflare-kv)

To upgrade an existing project, use the automated `@astrojs/upgrade` CLI tool. Alternatively, upgrade manually by running the upgrade command for your package manager:

```sh
# Recommended:
npx @astrojs/upgrade

# Manual:
npm install astro@latest
pnpm upgrade astro --latest
yarn upgrade astro --latest
```

## Experimental static `import.meta.env`

Adds an experimental flag `staticImportMetaEnv` to disable replacement of `import.meta.env` values with `process.env` calls and their coercion, and supersedes the `rawEnvValues` experimental flag

Astro allows you to configure a [type-safe schema for your environment variables](https://docs.astro.build/en/guides/environment-variables/#type-safe-environment-variables), and converts variables imported via `astro:env` into the expected type.

However, Astro by default turns non-public `import.meta.env` values into `process.env` calls during the build, if the environment variable name is present in `process.env`. It also converts your environment variables used through `import.meta.env` in some cases, and this can prevent access to some values, such as the strings `"true"` (which is converted to a boolean value), and `"1"` (which is converted to a number).

The `experimental.staticImportMetaEnv` flag disables this behavior, ensuring that `import.meta.env` values are always inlined.

To enable this feature, add the experimental flag in your Astro config:

```diff
import { defineConfig } from "astro/config";

export default defineConfig({
+  experimental: {
+    staticImportMetaEnv: true
+  }
});
```

This experimental flag supersedes the `experimental.rawEnvValues` flag, which you need to remove in your Astro config:

```diff
import { defineConfig } from "astro/config";

export default defineConfig({
   experimental: {
-    rawEnvValues: true
+    staticImportMetaEnv: true
   }
});
```

## Experimental Chrome DevTools workspace support

Chrome workspace folders allow you to save changes made in DevTools back to your project code via a connected workspace folder. This allows you to apply edits such as CSS adjustments without ever leaving your browser tab!

Astro 5.13 brings a new experimental option for the Astro dev server to automatically configure a Chrome DevTools workspace for your project. Your project folder will appear as a workspace source, no manual configuration needed, ready for you to connect. Then, any changes that you make in the "Sources" panel are automatically saved to your local source files.

To enable this feature, add the experimental flag `chromeDevtoolsWorkspace` to your Astro config:

```js title="astro.config.mjs" ins={4-6}
import { defineConfig } from 'astro/config';

export default defineConfig({
  experimental: {
    chromeDevtoolsWorkspace: true,
  },
});
```

See the [experimental Chrome DevTools workspace feature documentation](https://docs.astro.build/en/reference/experimental-flags/chrome-devtools-workspace/) for more information.

## Multiple sitemaps

The `@astrojs/sitemap` integration has always supported the option to include externally-generated pages in the `sitemap-index.xml` file generated by Astro. This allows you to include pages in your sitemap that are a part of your deployed site, but not created by Astro.

The latest release of the integration adds a new `customSitemaps` configuration option to include externally-generated sitemaps in the `sitemap-index.xml` file along with the Astro-generated sitemap entries.

This is useful for multi-framework setups on the same domain as your Astro site (`example.com`), such as a blog at `example.com/blog` whose sitemap is generated by another framework.

You can specify any additional sitemaps in your `sitemap` configuration:

Example:

```js
import { defineConfig } from 'astro/config';
import sitemap from '@astrojs/sitemap';

export default defineConfig({
  site: 'https://example.com',
  integrations: [
    sitemap({
      customSitemaps: [
       'https://example.com/blog/sitemap.xml',
       'https://example.com/helpcenter/sitemap.xml'
      ]
    })
  ]
});
```

Learn more in the [`@astrojs/sitemap` configuration documentation](https://docs.astro.build/en/guides/integrations-guide/sitemap/#configuration).

Thanks to [Gourav Khunger](https://github.com/gouravkhunger) who contributed this feature.


## Experimental hosted error pages

The latest release of the Node.js adapter ships with experimental support for loading prerendered custom error pages from any specified host.

Astro needs to be able to load your 404 page in order to return it in a response. By default, Astro will load prerendered custom error pages from the same host as the one that the request is made to. For example, if a request is made to `https://example.com/nonexistent-page`, Astro will attempt to load the prerendered error page from `https://example.com/404.html`.

`@astrojs/node@9.4.0` now handles situations where your custom error page must be loaded from a different host, such as when the server is running behind a reverse proxy or in a container that may not have access to the external host URL. You can also use this option when it is more efficient to load the prerendered error page from localhost rather than via the public internet.

To use this feature, set the `experimentalErrorPageHost` adapter option in your Astro configuration to the desired host URL. For example, if your server is running on localhost and served via a proxy, you can ensure the prerendered error pages are fetched via the localhost URL:

```js
import { defineConfig } from 'astro/config';
import node from '@astrojs/node';

export default defineConfig({
  adapter: node({
    // If your server is running on localhost and served via a proxy,
    // set the host like this to ensure prerendered error pages are fetched via the localhost URL
    experimentalErrorPageHost: 'http://localhost:4321'
  })
});
```

For more information on enabling and using this experimental feature, see the [`@astrojs/node` adapter docs](https://docs.astro.build/en/guides/integrations-guide/node/#experimentalerrorpagehost).


## Enum support in Astro DB tables

We are sure you'll be `({ enum: ['happy', 'thrilled', 'over the moon'] })` about this update to Astro DB!

The latest release brings long-awaited enum support for text columns in Astro DB tables. This behavior better aligns with user expectations and with the underlying Drizzle implementation.

Note that this is used exclusively to generate types, and no runtime validation will be performed. Removing, adding, and changing values should be handled in your own project code.

```ts
import { column, defineTable } from 'astro:db';

// Table definition
const UserTable = defineTable({
	columns: {
		id: column.number({ primaryKey: true }),
		name: column.text(),
        rank: column.text({ enum: ['user', 'mod', 'admin'] })
	}
});

// Resulting type definition
type UserTableInferInsert = {
    id?: string;
    name: string;
    rank: "user" | "mod" | "admin";
}
```

## Local support for Cloudflare KV

The newest release of the Cloudflare adapter includes local support for [Cloudflare Workers KV](https://developers.cloudflare.com/kv/) when running `astro dev`. This internal refactoring is a drop-in replacement for powering Astro sessions and does not require any change to your existing project code.

However, you can now choose to connect to the remote [Cloudflare KV Namespace](https://developers.cloudflare.com/kv/concepts/kv-namespaces/) if desired and use production data during local development.

## Bug fixes

As always, we've been working hard on fixing issues since the [5.12 release](/blog/astro-5120). See [the changelog](https://github.com/withastro/astro/blob/main/packages/astro/CHANGELOG.md) for all the details.

## Community

The Astro core team is:

<Mention name="alex" />, <Mention name="ben" />, <Mention name="caleb" />,
<Mention name="chris" />, <Mention name="ema" />, <Mention name="erika" />,
<Mention name="florian" />, <Mention name="fred" />, <Mention name="fuzzy" />,
<Mention name="hideoo" />, <Mention name="luiz" />, <Mention name="matt" />,
<Mention name="matthew" />, <Mention name="nate" />, <Mention name="reuben" />,
<Mention name="sarah" />, and <Mention name="yan" />

Thanks to all the other contributors who helped make Astro 5.13 possible with code and docs additions and improvements, including:
