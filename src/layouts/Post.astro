---
import Layout from './Content.astro';
import ProseBlock from '../components/blocks/ProseBlock.astro';
import Card from '../components/blog/Card.astro';
import Outro from '../components/blog/Outro.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';
import Panel from '../components/Panel.astro';

export interface Props {
	content: {
		title: string;
		description: string;
		authors: string[];
		publishDate: string | Date;
		socialImage: string;
	}
}

const { content: { title, publishDate, description, authors, socialImage } } = Astro.props as Props;
const { canonicalURL } = Astro.request;
const meta = {
	title,
	description,
	canonicalURL,
	image: socialImage,
}
---

<Layout meta={meta}>
    <Nav slot="nav" />

    <ProseBlock class="blogpost">
		<Panel size="lg" elevation="md" class="not-prose mb-16 lg:mb-24" background="white">
			<Card post={{ title, description, authors, publishDate }} variant="hero" />
		</Panel>

		<slot />

		<Outro tweet={{ title, href: Astro.request.canonicalURL.toString() }} />
	</ProseBlock>

    <Footer slot="footer" />
</Layout>

<style>
	.blogpost :global(h1) {
		@apply text-2xl;
	}

	.blogpost :global(h2) {
		@apply text-lg lg:text-xl;
	}

	.blogpost :global(h3, h4) {
		@apply text-lg;
	}

	.blogpost .not-prose {
		@apply sm:ml-0 sm:mr-0;
	}
</style>